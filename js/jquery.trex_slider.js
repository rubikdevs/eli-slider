
$(document).ready(function(){OnloadedBG=$('.trex-slide:first').attr('data');$('#slider').animate({opacity:0},100,function(){$(this).css({'background-image':'url('+OnloadedBG+')'}).animate({opacity:1});});});(function($,undefined){console.log('sliding');$.Slider=function(options,element){this.$el=$(element);this._init(options);};$.Slider.defaults={current:0,bgincrement:50,autoplay:false,interval:4000};$.Slider.prototype={_init:function(options){try{console.log('hi');this.options=$.extend(true,{},$.Slider.defaults,options);this.$slides=this.$el.children('div.trex-slide');this.slidesCount=this.$slides.length;this.current=this.options.current;console.log(this.current);if(this.current<0||this.current>=this.slidesCount){this.current=0;}
this.$slides.eq(this.current).addClass('trex-slide-current');var $navigation=$('<nav class="trex-dots"/>');for(var i=0;i<this.slidesCount;++i){$navigation.append('<span/>');}
$navigation.appendTo(this.$el);this.$pages=this.$el.find('nav.trex-dots > span');this.$navNext=this.$el.find('span.trex-arrows-next');this.$navPrev=this.$el.find('span.trex-arrows-prev');this.isAnimating=false;this.bgpositer=0;this.cssAnimations=Modernizr.cssanimations;this.cssTransitions=Modernizr.csstransitions;if(!this.cssAnimations||!this.cssAnimations){this.$el.addClass('trex-slider-fb');}
this._updatePage();this._loadEvents();if(this.options.autoplay){this._startSlideshow();}}catch(error){console.log(error);}},_navigate:function(page,dir){var $current=this.$slides.eq(this.current),$next,_self=this;if(this.current===page||this.isAnimating)return false;this.isAnimating=true;var classTo,classFrom,d;if(!dir){(page>this.current)?d='next':d='prev';}
else{d=dir;}
if(this.cssAnimations&&this.cssAnimations){if(d==='next'){classTo='trex-slide-toleft';classFrom='trex-slide-fromright';if(page==0){activeBG=$('.trex-slide:first').attr('data');}else{activeBG=$current.next('div').attr('data');}
$('#slider').animate({opacity:0.8},500,function(){$(this).css({'background-image':'url('+activeBG+')'}).animate({opacity:1});});++this.bgpositer;}else{classTo='trex-slide-toright';classFrom='trex-slide-fromleft';if(page==0){activeBG=$('.trex-slide:first').attr('data');}else{if(page==$('.trex-slide:last').index()){activeBG=$('.trex-slide:last').attr('data');}else{activeBG=$current.prev('div').attr('data');}}
$('#slider').animate({opacity:0.8},500,function(){$(this).css({'background-image':'url('+activeBG+')'}).animate({opacity:1});});--this.bgpositer;}
this.$el.css('background-position',this.bgpositer*this.options.bgincrement+'% 0%');}
this.current=page;$next=this.$slides.eq(this.current);if(this.cssAnimations&&this.cssAnimations){var rmClasses='trex-slide-toleft trex-slide-toright trex-slide-fromleft trex-slide-fromright';$current.removeClass(rmClasses);$next.removeClass(rmClasses);$current.addClass(classTo);$next.addClass(classFrom);$current.removeClass('trex-slide-current');$next.addClass('trex-slide-current');}
if(!this.cssAnimations||!this.cssAnimations){$next.css('left',(d==='next')?'100%':'-100%').stop().animate({left:'0%'},1000,function(){_self.isAnimating=false;});$current.stop().animate({left:(d==='next')?'-100%':'100%'},1000,function(){$current.removeClass('trex-slide-current');});}
this._updatePage();},_updatePage:function(){this.$pages.removeClass('trex-dots-current');this.$pages.eq(this.current).addClass('trex-dots-current');},_startSlideshow:function(){var _self=this;this.slideshow=setTimeout(function(){var page=(_self.current<_self.slidesCount-1)?page=_self.current+1:page=0;_self._navigate(page,'next');if(_self.options.autoplay){_self._startSlideshow();}},this.options.interval);},page:function(idx){if(idx>=this.slidesCount||idx<0){return false;}
if(this.options.autoplay){clearTimeout(this.slideshow);this.options.autoplay=false;}
this._navigate(idx);},_loadEvents:function(){var _self=this;this.$pages.on('click.cslider',function(event){_self.page($(this).index());return false;});this.$navNext.on('click.cslider',function(event){if(_self.options.autoplay){clearTimeout(_self.slideshow);_self.options.autoplay=false;}
var page=(_self.current<_self.slidesCount-1)?page=_self.current+1:page=0;_self._navigate(page,'next');return false;});this.$navPrev.on('click.cslider',function(event){if(_self.options.autoplay){clearTimeout(_self.slideshow);_self.options.autoplay=false;}
var page=(_self.current>0)?page=_self.current-1:page=_self.slidesCount-1;_self._navigate(page,'prev');return false;});if(this.cssTransitions){if(!this.options.bgincrement){this.$el.on('webkitAnimationEnd.cslider animationend.cslider OAnimationEnd.cslider',function(event){if(event.originalEvent.animationName==='toRightAnim4'||event.originalEvent.animationName==='toLeftAnim4'){_self.isAnimating=false;}});}
else{this.$el.on('webkitTransitionEnd.cslider transitionend.cslider OTransitionEnd.cslider',function(event){if(event.target.id===_self.$el.attr('id'))
_self.isAnimating=false;});}}}};var logError=function(message){if(this.console){console.error(message);}};$.fn.cslider=function(options){if(typeof options==='string'){var args=Array.prototype.slice.call(arguments,1);this.each(function(){var instance=$.data(this,'cslider');if(!instance){logError("cannot call methods on cslider prior to initialization; "+"attempted to call method '"+options+"'");return;}
if(!$.isFunction(instance[options])||options.charAt(0)==="_"){logError("no such method '"+options+"' for cslider instance");return;}
instance[options].apply(instance,args);});}
else{this.each(function(){var instance=$.data(this,'cslider');if(!instance){$.data(this,'cslider',new $.Slider(options,this));}});}
return this;};})(jQuery);